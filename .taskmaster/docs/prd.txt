1) 배경/문제정의
- 현재 pomobox 타이머는 Focus → Break (4번째마다 Long Break) 순환으로 동작하며, Pause는 별도 상태가 아닌 “isRunning 토글” 수준으로 처리되는 구조다. 그 결과 Pause/Resume이 상태머신 관점에서 명시되지 않아 전이 규칙이 모호하고, 엣지 케이스(예: 00:00 직전 연타, Skip/Reset 동시 입력, 새로고침 복구)가 사양으로 확정되어 있지 않다.
- 통계는 “일일 완료 Focus 세션 수”와 “일일 누적 Focus 분(min)”을 localStorage에 저장/복구하며, 날짜가 바뀌면 초기화하는 방식이다. 현재 정책(완료 세션만 집계, Skip/Reset은 통계 불변)을 유지해야 하나, (a) 새로고침 시 진행 중 타이머 상태/사이클 카운트 복구 부재, (b) 자정 경과 중 실행 지속 시 초기화 타이밍 불명확, (c) 회귀 테스트 부재로 통계 정합성이 깨질 위험이 있다.
- 설정 다이얼로그는 모달 UI로 제공되며 기본적인 접근성 골격은 있으나, 키보드 포커스 트랩/초기 포커스/닫힘(ESC)/포커스 복귀(restoreFocus) 등 “보장되어야 하는 UX”가 요구사항으로 확정되어 있지 않다. 또한 아이콘-only 컨트롤(예: Reset)이 라벨링/스크린리더 친화성 측면에서 보완이 필요하다.
- 이번 작업은 (1) Pause/Resume UI 및 상태머신 정확성, (2) 통계 정책 유지 + 회귀 테스트 추가, (3) 설정 다이얼로그 UX 및 A11y를 “실행 가능한 PRD”로 확정하는 것을 목표로 한다.

2) 목표(Goals) / 비목표(Non-goals)
Goals
- Pause/Resume를 “상태머신”에 명시적으로 포함하여 Focus/Break/Long Break에서의 일시정지/재개가 예측 가능하고 정확하게 동작하게 한다.
- 00:00 경계조건, 연타, 새로고침 복구, Skip/Reset을 포함한 전이 규칙을 사양으로 확정하고, 중복 완료/중복 집계가 발생하지 않도록 한다.
- 통계 정책(세션/완료세션/누적포커스시간/롱브레이크 카운트)을 유지하고, 회귀 테스트(불변조건)로 정책이 깨지지 않게 한다.
- 설정 다이얼로그 UX를 개선하고, 키보드 접근성(포커스 트랩, ESC 닫기, 포커스 복귀, 라벨링)을 수용 기준으로 확정한다.
- 품질 게이트(package.json scripts 기준)를 통과하는 변경만 허용하도록 테스트 전략을 포함한다.

Non-goals
- Pomodoro 규칙 자체(기본 Focus/Break 길이 체계, Long Break 주기 등)를 변경하지 않는다.
- 새로운 통계 지표(주간/월간, 히스토리, 차트) 도입은 범위 밖.
- 전면 UI 리디자인/테마 개편은 범위 밖(필요 최소한의 버튼/다이얼로그 개선만).
- 알림(Notification)·사운드 기능 확장(옵션 추가, 새 이벤트)은 범위 밖(단, Pause 상태 도입으로 기존 동작이 깨지지 않게 유지).

Note: 2025-12-25 이후 정책 변경 - localStorage 기반 상태 복구는 제거됨 (stateless 앱: 새로고침/재방문 시 초기 설정으로 리셋)

3) 용어/정의 (통계 정책은 “정의문”으로 명시)
- Focus 세션: 집중(work) 구간. “완료”는 타이머가 00:00에 정상 도달한 경우를 의미한다.
- Break(Short): 짧은 휴식 구간.
- Long Break: 4개의 Focus 세션이 “종료”된 후 제공되는 긴 휴식 구간. (현행과 동일한 트리거 규칙 유지)
- 세션(sessions): 오늘 “완료된 Focus 세션”의 개수. 정의: Focus가 00:00에 정상 도달할 때만 +1. Skip/Reset으로 종료된 Focus는 포함하지 않는다.
- 완료세션(completedSessions): Pomodoro 사이클 진행을 위한 내부 카운트. 정의: Focus 구간이 “종료”될 때 +1. Focus가 완료(00:00 도달)되든 Skip으로 종료되든 증가한다. (롱브레이크 트리거 계산에 사용)
- 누적포커스시간(totalFocusMinutes): 오늘 “완료된 Focus 세션들의 설정 시간 합(분)”으로 정의한다. 정의: Focus 완료 시 해당 Focus duration(분)을 더한다. Pause/Resume은 영향 없음. Skip/Reset된 Focus는 누적되지 않는다.
- 롱브레이크 카운트(longBreakCount): 정의: Long Break가 “시작될 때” +1. Long Break를 Skip해도 이미 시작되었으므로 카운트는 변하지 않는다. (표시/저장 여부는 제품 결정; 본 PRD에서는 최소한 내부/테스트에서 정합성을 보장)

정의 불변조건(Regression Invariants)
- sessions는 “완료 Focus” 횟수와 항상 동일하다.
- totalFocusMinutes는 “완료 Focus들의 (각 Focus duration 합)”과 항상 동일하다.
- Skip/Reset은 sessions와 totalFocusMinutes를 절대 변경하지 않는다.
- completedSessions는 “종료된 Focus” 횟수(완료+Skip)와 동일하다.
- longBreakCount는 “completedSessions가 4의 배수로 도달하여 Long Break가 시작된 횟수”와 동일하다.

4) 사용자 시나리오 (최소 3개)
시나리오 A: Focus 중 Pause/Resume
- 사용자는 Focus를 시작한다.
- 방해가 생겨 Pause를 누른다. 남은 시간이 유지되고 카운트다운이 멈춘다.
- Resume을 누르면 Pause 직전 남은 시간부터 이어서 진행한다.
- 00:00 도달 시 Break/Long Break로 전환되며, 통계는 “완료 Focus”로 집계된다.

시나리오 B: Skip/Reset과 통계 불변
- 사용자는 Focus 진행 중 Skip을 눌러 즉시 Break/Long Break로 넘어간다.
- 이 Focus는 sessions/totalFocusMinutes에 집계되지 않는다.
- 사용자는 Break를 Skip하여 다음 Focus로 즉시 전환한다.
- 사용자는 Focus 진행 중 Reset을 눌러 초기 Focus로 돌아간다(통계 불변).

시나리오 C: 새로고침 복구 [DEPRECATED - 2025-12-25 정책 변경으로 미지원]
- ~~사용자는 Focus 진행 중(또는 Pause 중) 페이지를 새로고침한다.~~
- ~~앱 재로드 후 이전 phase(Focus/Break/LongBreak), 남은 시간, Pause 여부가 복구되어야 한다.~~
- ~~복구 시점에 이미 targetEnd가 지났다면(사용자 부재 중 시간 경과), 해당 세션을 "완료 처리/전이"하여 다음 상태로 복원한다.~~
- **현재 정책**: Stateless 앱으로 운영. 새로고침/재방문 시 항상 초기 설정으로 리셋. localStorage 미사용.

시나리오 D: 설정 다이얼로그 키보드 접근
- 사용자는 키보드(Tab/Enter)로 Settings 버튼을 활성화해 다이얼로그를 연다.
- 다이얼로그가 열리면 포커스가 내부 첫 요소로 이동하고, Tab/Shift+Tab으로 내부에서만 순환한다.
- ESC로 닫으면 포커스가 Settings 버튼으로 복귀한다.
- 아이콘-only 버튼(Reset 등)은 스크린리더에 의미 있게 읽힌다(aria-label 등).

5) 기능 요구사항 (명확한 MUST/SHOULD)
타이머/Pause-Resume
- MUST: Focus/Break/Long Break 각각에서 Pause/Resume이 동작해야 한다.
- MUST: Pause는 카운트다운을 정지시키며 남은 시간(timeLeft)을 보존한다.
- MUST: Resume은 Pause 시점의 남은 시간부터 이어서 진행한다.
- MUST: Pause/Resume은 통계(sessions/totalFocusMinutes)에 영향을 주지 않는다.
- MUST: 00:00 경계(종료 이벤트)와 사용자 입력이 경합하더라도 “종료 처리(상태 전이/통계 집계)”는 단 1회만 발생해야 한다.
- SHOULD: Pause 상태에서도 Skip/Reset을 허용하되, “Pause 중인 원래 phase”에 대해 Skip/Reset 규칙을 동일 적용한다.

Skip/Reset
- MUST: Focus에서 Skip하면 즉시 Focus 종료로 간주하고 다음 Break/Long Break로 전환한다.
- MUST: Focus Skip은 completedSessions에는 포함되나 sessions/totalFocusMinutes에는 반영되지 않는다.
- MUST: Break/Long Break에서 Skip하면 즉시 Focus로 전환한다.
- MUST: Reset은 어떤 상태에서든 타이머를 정지시키고 초기 Focus로 리셋한다.
- MUST: Skip/Reset은 통계(sessions/totalFocusMinutes)를 절대 변경하지 않는다.

롱브레이크
- MUST: Long Break는 completedSessions가 4의 배수로 도달하여 “시작될 때” 트리거된다.
- MUST: Long Break 시작은 longBreakCount +1로 집계된다.
- SHOULD: completedSessions 리셋 여부는 현행 동작 유지(미리 결정되어 있지 않다면 Open Issue로 남김). 단, Long Break 트리거 패턴(4, 8, 12…)이 테스트로 보장되어야 한다.

설정 다이얼로그 UX
- MUST: 설정값은 저장되고 즉시 반영되며, “타이머가 진행 중일 때는 저장/변경 제약”이 명확해야 한다.
- SHOULD: 저장 성공 피드백(Toast/버튼 상태 변화)을 제공한다.

접근성(A11y)
- MUST: 키보드만으로 Start/Pause, Skip, Reset, Settings 열기/닫기를 수행할 수 있어야 한다.
- MUST: Dialog는 포커스 트랩, ESC 닫기, 닫힘 후 포커스 복귀를 보장한다.
- MUST: 아이콘-only 버튼은 aria-label 등으로 의미를 제공한다.
- MUST: Dialog가 열려 있을 때 전역 단축키가 타이머에 영향을 주지 않도록 차단한다.

6) 상태머신 명세 (상태/이벤트/전이, 엣지케이스 포함)
상태(States)
- FOCUS_RUNNING
- FOCUS_PAUSED
- BREAK_RUNNING
- BREAK_PAUSED
- LONGBREAK_RUNNING
- LONGBREAK_PAUSED
(구현은 “phase + running/paused” 형태의 조합 상태로 가능)

이벤트(Events)
- START: 정지 상태에서 실행 시작
- TICK: 시간 경과(내부 루프)
- TIME_UP: 남은 시간 0 도달
- PAUSE: 실행 중 일시정지
- RESUME: 일시정지 해제
- SKIP: 현재 phase 강제 종료/전환
- RESET: 초기 Focus로 리셋
- REHYDRATE: 저장된 상태로 복구(새로고침/재접속)
- VISIBILITY_RESUME: 탭 비활성 후 복귀 시 보정(필요 시)

전이(Transitions) 개요
- FOCUS_RUNNING
  - PAUSE → FOCUS_PAUSED
  - TIME_UP → (completedSessions++, sessions++, totalFocusMinutes+=focusDuration) 후
      - completedSessions % 4 == 0 → LONGBREAK_RUNNING(또는 정지 진입 정책)
      - else → BREAK_RUNNING
  - SKIP → (completedSessions++ only) 후
      - completedSessions % 4 == 0 → LONGBREAK_RUNNING
      - else → BREAK_RUNNING
  - RESET → 초기 Focus 정지 상태로 복귀

- FOCUS_PAUSED
  - RESUME → FOCUS_RUNNING
  - SKIP/RESET → FOCUS_RUNNING 규칙과 동일 적용(통계 불변)

- BREAK_RUNNING
  - PAUSE → BREAK_PAUSED
  - TIME_UP → FOCUS_RUNNING(또는 정지 진입 정책)
  - SKIP → FOCUS_RUNNING
  - RESET → 초기 Focus 정지 상태로 복귀

- BREAK_PAUSED
  - RESUME → BREAK_RUNNING
  - SKIP/RESET → BREAK_RUNNING 규칙과 동일 적용

- LONGBREAK_RUNNING / LONGBREAK_PAUSED
  - BREAK와 동일 패턴. TIME_UP 또는 SKIP 시 FOCUS로 전환.

엣지 케이스 규칙(필수)
- 00:00 직전 연타(예: TIME_UP 직전에 SKIP/PAUSE/RESET 연타):
  - MUST: 종료 처리(상태 전이 및 통계 집계)는 1회만 수행.
  - 구현 가이드(사양): “종료 처리 중 플래그/락” 또는 “TIME_UP 처리 시 UI 입력 무시/비활성화” 또는 “이벤트 큐 순서 고정” 중 택1.
- 새로고침 복구(REHYDRATE):
  - MUST: phase, remainingSeconds, paused/running, completedSessions, (running이면) targetEndAt를 기반으로 복구.
  - MUST: targetEndAt가 이미 지났다면(사용자 부재), TIME_UP 처리와 동일한 결과로 전이/집계를 수행(단 1회).
- Skip/Reset:
  - MUST: Skip/Reset은 통계(sessions/totalFocusMinutes)를 변경하지 않음.
  - MUST: Focus Skip만 completedSessions 증가(롱브레이크 계산 유지).

타이머 루프(정확도 규정)
- MUST: 타이머 루프는 setInterval/RAF/worker 중 어떤 방식이든 가능하나, “timestamp delta(현재시각 기반)”로 드리프트를 최소화해야 한다.
- MUST: 탭 비활성/활성 전환 시 보정(VISIBILITY_RESUME)을 수행해 오차 누적을 방지해야 한다.

7) 데이터/저장/복구 정책 [DEPRECATED - 2025-12-25 정책 변경]

**현재 정책 (2025-12-25 이후)**:
- **Stateless 앱**: localStorage 완전 제거 (109줄 삭제, commit 643597c)
- 새로고침/재방문 시 항상 초기 설정으로 리셋
- 타이머 상태, 통계, 설정 모두 브라우저 세션에만 유지
- 향후 Supabase 백엔드 도입 시 영구 저장 고려 가능

**[아래 localStorage 스키마는 미사용 - 참고용으로만 유지]**

기존 저장(미사용)
- pomodoro-settings: JSON(string). focusDuration, breakDuration, notificationsEnabled, soundEnabled, volume 등.
- pomodoro-date: string. 일일 통계 기준 날짜.
- pomodoro-sessions: string(number). 일일 완료 Focus 세션 수(sessions).
- pomodoro-total-minutes: string(number). 일일 누적 Focus 분(totalFocusMinutes).

신규(추가 필요)
- pomodoro-completed-sessions: string(number). completedSessions(롱브레이크 계산/복구용).
- pomodoro-long-break-count: string(number). longBreakCount(테스트/정합성/표시 옵션).
- pomodoro-timer-state: JSON(string)
  - schema v1:
    - version: 1
    - phase: "focus" | "break" | "longBreak"
    - status: "idle" | "running" | "paused"
    - remainingSeconds: number
    - targetEndAtMs: number | null (running일 때 권장)
    - completedSessions: number
    - longBreakCount: number
    - lastUpdatedAtMs: number

복구 규칙
- REHYDRATE 시 pomodoro-timer-state를 파싱한다.
- status가 running이고 targetEndAtMs가 존재하면:
  - remainingSeconds = ceil((targetEndAtMs - now)/1000)
  - remainingSeconds <= 0 이면: TIME_UP 처리(단 1회) 후 다음 상태로 전이한 결과를 저장한다.
  - remainingSeconds > 0 이면: “자동 재개 여부”는 제품 정책으로 결정. 본 PRD 기본값은 “paused로 복구(사용자 명시 재개)”를 권장한다.
- status가 paused/idle이면 remainingSeconds 그대로 복구한다.

일일 리셋
- pomodoro-date가 “오늘”과 다르면:
  - pomodoro-sessions=0, pomodoro-total-minutes=0, pomodoro-completed-sessions=0, pomodoro-long-break-count=0
  - pomodoro-date=오늘로 갱신
- 자정 경계 중 실행 지속 시 처리(정책 미확정)는 Open Issues로 남긴다(단, 최소한 앱 재진입 시 정합성 보장).

마이그레이션
- MUST: 기존 사용자에게 pomodoro-timer-state/완료세션/롱브레이크 카운트 키가 없을 수 있다.
- MUST: 신규 키가 없으면 0/초기값으로 처리하며 앱이 정상 동작해야 한다.
- SHOULD: pomodoro-timer-state에 version을 넣어 향후 스키마 변경 시 마이그레이션 루틴을 추가할 수 있게 한다.

8) 접근성 요구사항 (키보드 포커스, ARIA, ESC, 포커스 복귀 등) + 수용 기준
MUST 요구사항
- Dialog는 role="dialog" + aria-modal="true"를 만족해야 하며, 제목/설명을 aria-labelledby/aria-describedby로 연결한다.
- Dialog open 시:
  - 포커스가 Dialog 내부 첫 인터랙티브 요소로 이동해야 한다.
  - Tab/Shift+Tab이 Dialog 내부에서만 순환(포커스 트랩)해야 한다.
- Dialog close 시:
  - ESC로 닫을 수 있어야 한다.
  - 닫힌 직후 포커스는 “열기 트리거(Settings 버튼)”로 복귀해야 한다(restoreFocus).
- 모든 버튼/컨트롤은 키보드로 접근 가능해야 하며, 아이콘-only 버튼은 aria-label을 제공해야 한다(Reset 등).
- Dialog가 열린 동안 전역 단축키(예: Space로 Start/Pause 등)가 타이머에 영향을 주지 않도록 차단해야 한다.

수용 기준(Accessibility Acceptance)
- 키보드만으로 Settings 열기(Enter) → 내부 순환(Tab) → ESC로 닫기 → 포커스가 Settings로 복귀가 100% 재현된다.
- Dialog 열림 중 Space/R/ESC 등의 키 입력이 타이머에 영향을 주지 않는다.
- Reset 버튼이 스크린리더에서 의미 있게 읽힌다(예: “Reset timer button”).
- Axe(또는 동등한 자동화 검사)에서 “이름 없는 버튼”, “잘못된 ARIA 속성”, “포커스 트랩 실패”에 해당하는 중대 이슈가 0건이다.

9) 테스트 전략 (유닛/통합/e2e) + 리그레션 항목(통계 불변조건)
테스트 층위
- Unit: 상태 전이/통계 업데이트/복구 계산 로직을 순수 함수로 분리하여 테스트.
- Integration: 컴포넌트 수준에서 사용자 이벤트(Pause/Resume/Skip/Reset)와 UI 상태를 검증.
- E2E: 실제 브라우저 환경에서 새로고침 복구, 키보드 접근성(포커스 트랩/ESC/restoreFocus), Long Break 트리거를 검증.

필수 회귀 항목(불변조건)
- Focus 완료(00:00) 시 sessions +1, totalFocusMinutes +focusDuration, completedSessions +1.
- Focus Skip 시 sessions/totalFocusMinutes 변화 없음, completedSessions +1.
- Break/LongBreak TIME_UP/Skip 시 통계 변화 없음.
- Reset 시 통계 변화 없음, phase=focus idle로 복귀.
- completedSessions가 4의 배수에 도달하여 Long Break가 시작될 때 longBreakCount +1.
- 00:00 직전 연타(사용자 입력 + TIME_UP 경합)에서도 집계/전이 1회만 발생.
- 새로고침 복구:
  - paused 상태 보존
  - running 상태는 targetEndAt 기반으로 remainingSeconds 재계산
  - 이미 종료시각이 지났으면 TIME_UP 처리에 준하는 전이/집계 1회 적용

A11y E2E(필수)
- Settings 버튼 → Enter로 Dialog 열기
- 첫 포커스 위치 확인
- Tab 순환 확인(포커스가 배경으로 나가지 않음)
- ESC로 닫기 및 Settings로 포커스 복귀 확인
- Dialog 열림 중 전역 단축키가 타이머에 영향을 주지 않음 확인

품질 게이트(스크립트 기반)
- MUST: package.json의 lint/build/test/e2e(존재하는 범위) 실행이 PR 통과 조건이다.
- 최소 검증: pnpm lint, pnpm build, pnpm test(존재 시), pnpm e2e(존재 시)

10) 수용 기준(Acceptance Criteria) 체크리스트
타이머/상태
- [ ] Pause 버튼으로 카운트다운이 즉시 멈추고 remainingSeconds가 유지된다.
- [ ] Resume 버튼으로 Pause 직전 remainingSeconds부터 정확히 재개된다.
- [ ] Pause/Resume은 sessions/totalFocusMinutes를 변경하지 않는다.
- [ ] TIME_UP(00:00) 시 전이/집계가 단 1회만 발생한다(연타/경합에서도 동일).
- [ ] Focus TIME_UP 시 sessions +1, totalFocusMinutes +focusDuration, completedSessions +1.
- [ ] Focus Skip 시 completedSessions +1만 적용되고 sessions/totalFocusMinutes는 불변.
- [ ] Break/LongBreak TIME_UP/Skip 시 통계 불변, Focus로 전이.
- [ ] Reset 시 통계 불변, 초기 Focus idle로 복귀.
- [ ] Long Break 트리거(4,8,12...) 패턴이 유지되고 longBreakCount가 정합적으로 증가한다.

저장/복구
- [ ] 새로고침 후 phase/paused/remainingSeconds가 복구된다.
- [ ] running 상태 저장 후 복귀 시 targetEndAt 기반으로 remainingSeconds가 보정된다.
- [ ] targetEndAt 경과 후 복귀 시 TIME_UP 처리에 준하는 전이/집계가 정확히 1회 수행된다.
- [ ] 신규 localStorage 키가 없는 기존 사용자도 정상 동작한다(기본값 처리).

설정 다이얼로그 UX/A11y
- [ ] 키보드만으로 Settings 열기(Enter) 가능.
- [ ] Dialog open 시 포커스가 내부로 이동하고, Tab/Shift+Tab은 내부에서만 순환.
- [ ] ESC로 Dialog 닫기 가능.
- [ ] Dialog 닫힘 후 포커스가 Settings 버튼으로 복귀.
- [ ] 아이콘-only 버튼(Reset 등)에 aria-label이 있다.
- [ ] Dialog 열림 중 전역 단축키가 타이머에 영향 없음.
- [ ] 자동 접근성 검사에서 중대 이슈 0건.

품질
- [ ] pnpm lint / pnpm build 통과
- [ ] pnpm test(존재 시) 통과
- [ ] pnpm e2e(존재 시) 통과

11) 리스크/롤백 전략
리스크
- 상태머신 복잡도 증가로 인해 전이 누락/중복 처리(특히 00:00 경계)가 발생할 위험
- 새로고침 복구 로직(targetEndAt 기반)에서 시간 보정 오류로 상태/집계가 틀어질 위험
- A11y(포커스 트랩/restoreFocus) 회귀로 키보드 사용성이 악화될 위험
- localStorage 스키마 확장으로 인해 예외 처리 누락 시 파싱 오류/초기화 오류가 발생할 위험

완화
- 전이/집계 로직을 순수 함수로 분리하고 유닛 테스트로 우선 고정
- 00:00 경계 경합을 강제 재현하는 테스트(E2E/유닛)를 필수화
- 복구 로직은 “paused로 복구(사용자 재개)”를 기본으로 하여 예측 가능성 확보
- 접근성 E2E를 CI에 포함(최소 1개 시나리오라도)

롤백
- 신규 localStorage 키는 구버전에서 무시되도록 설계하여 롤백 시 데이터 호환 문제를 최소화
- 문제가 심각할 경우 이전 안정 커밋으로 재배포(기능 플래그 도입은 선택)
- 롤백 시 진행 중 타이머 상태 복구는 일부 손실 가능하나, 통계 데이터 손상은 방지(세션/분 값은 기존 키 유지)

12) 오픈 이슈 (레포 확인 후에도 불명확한 항목만)
- Skip한 Focus를 completedSessions에 포함(롱브레이크 계산에 반영)하는 현행 정책이 사용자 기대와 맞는지(현행 유지 vs 변경).
- Long Break 이후 completedSessions를 리셋할지(사이클을 1~4로 고정) vs 누적(4,8,12...) 유지할지(현행 유지 가정).
- 자정 경계 중 앱 실행 지속 시 통계 리셋 타이밍/귀속 정책(세션 시작 시점 vs 종료 시점 기준).
- 새로고침 복구 시 running 상태를 “자동 재개”할지 “paused로 복구 후 사용자 재개”로 할지(본 PRD는 후자를 권장).
- Dialog overlay 클릭으로 닫기 허용 여부(실수 방지 vs 편의성).

구현 전 최소 체크(선택)
(a) Plan 생성 권장 조건
- 상태머신/저장 스키마/통계 불변조건/접근성 요구가 동시에 얽혀 있어 변경 범위가 넓다.
- 다음 중 1개 이상에 해당하면 구현 전 작업 계획(Plan) 수립을 권장:
  - 새로고침 복구(targetEndAt 기반)까지 포함하여 동작을 확정해야 함
  - A11y E2E를 CI에 포함해야 함
  - 통계 불변조건을 유닛 테스트로 고정해야 함
  - 00:00 경계 경합(연타)을 안정적으로 재현/검증해야 함

(b) 최소 검증 명령
- pnpm lint
- pnpm build
- pnpm test (존재 시)
- pnpm e2e (존재 시)

13) 완료된 작업 (2025-12-25 UI/UX 개선)
다음 작업들은 PRD의 핵심 요구사항(Pause/Resume, 통계, 접근성)과는 별개로 2025-12-25에 완료되었습니다:

UI/UX 현대화
- [x] 다크 모드 배경색을 zinc-950 (near-black neutral gray)로 변경하여 모던하고 깔끔한 느낌 구현
- [x] 라이트 모드 배경색을 gray-50으로 변경하여 대비/가독성 개선
- [x] Settings 다이얼로그 외곽선 강조 (light: slate-400, dark: zinc-800)
- [x] 타이머 원(progress circle) 배경색을 테마별로 조정 (light: zinc-300, dark: zinc-700)
- [x] Pause 상태 색상을 amber 계열로 변경 (yellow 대체)
- [x] 타이머 상태 텍스트("Focus Session", "Break Time") 강조 (text-lg font-bold)
- [x] 라이트 모드 Pause 버튼 외곽선 강조 (border-2 border-slate-400)
- [x] 테마 토글 버튼을 fixed 우측 하단으로 이동, 배경/그림자 추가하여 가시성 개선

기본 설정 최적화
- [x] Sound 기본값을 enabled=true, volume=50으로 변경 (사용자 경험 개선)
- [x] Settings 저장 후 "Saved!" 표시 시간을 2초에서 1초로 단축

상태 관리 정책 변경
- [x] localStorage 완전 제거 (109줄 삭제)
- [x] Stateless 앱으로 전환: 새로고침/재방문 시 항상 초기 설정으로 리셋
- [x] 설정값, 세션 통계, 타이머 상태 모두 브라우저 세션에만 유지

Context7 Baseline 추가
- [x] Tailwind CSS dark mode best practices 2025 문서 조회 및 baseline 등록

커밋 기록
- c961254: 라이트 모드 Pause 버튼 외곽선 강조
- 643597c: 새로고침/재방문 시 초기 설정으로 리셋 (localStorage 제거)
- 508730f: UI/UX 개선 및 기본 설정 최적화
- 77a6df4: 다크 테마를 zinc-950으로 더 어둡게 변경
- 63c3a59: 다크 테마 배경색을 zinc 계열로 변경
- 0f941ea: 다크/라이트 모드 UI 개선
